## 3D_Jump 


김동호 Unity 3D 개인과제


https://vimeo.com/1064559234/5b5a648c5d?share=copy <= 영상입니다.



## 조작 / 이동
![녹화_2025_03_11_14_34_30_627](https://github.com/user-attachments/assets/6dcd4f7f-47c4-425c-b7c3-c6cebe8f7f39)


조작키는 대부분 InputAction을 사용해 처리하였습니다.


## 동적 환경 조사 / 아이템
![녹화_2025_03_11_14_34_43_655](https://github.com/user-attachments/assets/928b24bc-068e-4fe3-846b-df1b6dca9585)


플레이어가 일정시간(0.5초) 마다 화면 중앙 기준으로 Ray를 발사하여 조사 가능 오브젝트가 있는지 검사합니다.


조사 가능 오브젝트들은 IInteractive 인터페이스를 포함시켜 오브젝트 정보들을 Scriptable Object로 담아둘수있도록 해주었습니다.


오브젝트가 감지 됐다면 우측 하단에 오브젝트, 아이템 이름과 간단한 정보를 UI를 통해 표시해줍니다.


아이템은 트리거에 플레이어가 감지됐다면 획득 할 수 있도록 해두었습니다.


아이템 획득 시 인벤토리에 추가되며 현재 인벤토리에 빈 슬롯, 획득한 아이템과 동일한 아이템을 가지고 있는 슬롯 등을


비교하여 조건에 맞는 슬롯에 넣어주게 됩니다.


인벤토리에서 아이템을 클릭하게 되면 상세정보를 표시해주는 클래스에게 자신의 아이템 정보, 수량 등을 넘겨주며


인벤토리 아래부분에 이미지, 보유갯수, 설명 등을 상세하게 표시해줍니다.


팝업UI(OpenCloseUI 클래스 (인벤토리, 옷장))들은 활성화 시 플레이어의 이동이 제한되도록 해주었습니다.


![녹화_2025_03_11_14_35_35_96](https://github.com/user-attachments/assets/a6111971-85b2-44f6-8db4-577d2436bd4d)


아이템 사용 시 ItemInfo라는 Scriptable Object를 ItemManager 클래스에게 넘겨주어


ItemManager 클래스에서 받아온 아이템 정보에 맞춰 포션 효과를 적용 시켜주도록 하였습니다.


## 옷장 / 코스튬 변경 / 스탯 UI
![녹화_2025_03_11_14_35_10_45](https://github.com/user-attachments/assets/bdb04286-c3fe-4221-aceb-9c1930bac01e)


상자(옷장)에 다가가게 되면 활성화 가능하다는 UI를 띄워줍니다.


UI에서 장착 버튼을 클릭하게 되면 플레이어 오브젝트에 있는 Costume 클래스에서 각 코스튬에 맞는 오브젝트를 가져와


활성화 및 해제한 코스튬은 비활성화 하도록 해주었습니다.


코스튬 변경시 ScriptableObject로 만들어둔 코스튬 정보에 맞춰 스탯이 변경됩니다.


스탯이 변경 될 시 우측 하단의 스탯UI들이 업데이트 되며


스탯 UI들은 각각 Action에 UI업데이트 함수를 추가해두어


HP 및 스태미너가 변경 될 때만 업데이트 되도록 해주었습니다.


## 점프대 / 낙하 데미지
![녹화_2025_03_11_14_35_49_423](https://github.com/user-attachments/assets/87fef41d-96bc-4315-bb36-c0a943206512)


점프대의 주변에 트리거 확인용 콜라이더를 한개 더 만들어 두어 플레이어가 트리거에 들어왔다면


Ray 검사 코루틴이 시작하도록 해주었습니다.


점프대 기준 위쪽 방향으로 Ray를 발사하여 플레이어가 위에 올라온 것이 감지되면 


Lerp를 사용하여 Y값 스케일을 줄여주어 점프대가 수축되는 효과를 주었고


점프대가 정해진 수치만큼 수축 됐다면 Space 키를 입력하여 위로 점프 할 수 있습니다.


점프대는 두 종류가 있으며 점프 중 이동이 가능한 점프대, 이동이 불가능한 점프대가 있습니다.


게임 중 아래로 낙하하여 아래에 설치된 콜라이더와 충돌하게 되면 플레이어가 일정 데미지를 입게되며


스크립트에 설정해둔 초기 위치로 되돌아 오도록 해주었습니다.


## 레버 / 이동 플랫폼
![녹화_2025_03_11_14_36_08_927](https://github.com/user-attachments/assets/385784fd-f6ff-496d-8ca1-af8ce63c91ff)


레버와 연결된 오브젝트 들은 모두 ILeverActionable을 포함시켜주었습니다.


ILeverActionable은 레버 오브젝트, 레버 활성화 시 실행될 함수, 실행한 함수가 종료 됐을 때 실행될 함수들을 포함하고 있습니다.


게임 시작 시 Start함수에서 자신의 부모 오브젝트 또는 자식 오브젝트 들에게서


ILeverActionable이 포함된 오브젝트들을 모두 가져옵니다.


레버와 상호작용 했을 때 가져온 ILeverActionable 오브젝트들의 StartLeverAction 함수를 일괄적으로 실행시켜줍니다.


레버와 상호작용 시 코루틴에서 Lerp를 이용해 레버가 당겨지는 듯한 효과를 주었습니다.

##

이동 플랫폼은 첫 위치와 도착 위치를 설정해두어 레버를 당겼을 때 두 위치 중 먼 곳으로 이동하도록 해주었습니다.


레버 활성화 시 플레이어를 플랫폼의 자식오브젝트로 설정합니다.


플랫폼 위에 피벗을 하나 생성하여 OverlapBox로 플레이어가 존재하는지 검사하여 


플레이어가 이동중 플랫폼을 벗어나거나 이동이 모두 끝났다면 자식 오브젝트로 설정한것을 다시 해제시켜주도록 하였습니다.


## 벽타기
![녹화_2025_03_11_14_36_28_514](https://github.com/user-attachments/assets/09bbff4a-6072-4e17-8ba6-99f4ed8173b3)
![녹화_2025_03_11_14_37_13_8](https://github.com/user-attachments/assets/eb98a9fc-2ead-4360-bb20-fd7d913574cd)


벽타기가 가능한 오브젝트들은 레이어를 따로 설정해두어 플레이어가 Ray를 발사했을 때 감지 할 수 있도록 하였습니다.


플레이어가 공중에 있을 때 Ray를 발사하여 정해둔 거리 안에 벽타기가 가능한 오브젝트가 있는지 검사하며


오브젝트가 발견됐을때 bool값인 canHang을 true로 변환시켜 키 입력을 통해 벽타기가 가능하도록 해주었습니다.


벽을 타게되면 플레이어의 중력을 꺼주도록 하였고 앞, 뒤 이동을 상, 하 이동으로 변경하여


벽에서 위 아래로 움직일 수 있도록 하였습니다.


벽타기 중에서는 지속적으로 Ray를 발사하여 현재 벽에 붙어 있지 않는것이 판정된다면 


중력을 다시 켜주며 벽타기 중이 아닌 상태로 변경하며 떨어지도록 해주었습니다.


벽 등반은 플레이어의 머리 위로 지속적으로 Ray를 발사하여


Ray에 벽이 검출되지 않았을 때 특정 키를 입력하여 올라 탈 수 있게 하였습니다.


올라탈 때는 플레이어의 입력을 제한시키고


등반 애니메이션 재생 후 Lerp를 이용해 플레이어의 포지션을 자연스럽게 조절해주도록 하였습니다.


## Ray 트랩
![녹화_2025_03_11_14_37_21_92](https://github.com/user-attachments/assets/3d419aeb-9310-473e-b02d-785be58fd975)


Ray 트랩은 정해둔 위치(함정 앞부분)에 지속적으로 Ray를 발사하여 플레이어가 감지 되었을 때 함정이 발동하도록


생성하였습니다. 코루틴 변수와 bool값 등을 활용하여 플레이어가 Ray에 계속 서있더라도


연속해서 발동되지 않고 원위치까지 돌아오고 나서야 발동되도록 해주었습니다.


##
![녹화_2025_03_11_14_37_42_478](https://github.com/user-attachments/assets/fe71c545-d565-4a5e-9b5d-a2e73b74d04e)
